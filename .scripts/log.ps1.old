function GetLogLevel($logLevel) {
    switch ($logLevel) {
        ( { $logLevel -ieq 'trace' -or $logLevel -ieq 'trc' }) { return "trace" }
        ( { $logLevel -ieq 'debug' -or $logLevel -ieq 'dbg' }) { return "debug" }
        ( { $logLevel -ieq 'info' -or $logLevel -ieq 'inf' }) { return "info" }
        ( { $logLevel -ieq 'warning' -or $logLevel -ieq 'wrn' }) { return "warn" }
        ( { $logLevel -ieq 'error' -or $logLevel -ieq 'err' }) { return "error" }
        ( { $logLevel -ieq 'FATAL' -or $logLevel -ieq 'ftl' }) { return "FATAL" }
        ( { $logLevel -ieq 'none' -or $logLevel -ieq 'non' }) { return $null }
        Default { return $null }
    }
}

function GetLogColor($logLevel) {
    switch ($logLevel) {
        ( { $logLevel -ieq 'trace' -or $logLevel -ieq 'trc' }) { return "DarkCyan" }
        ( { $logLevel -ieq 'debug' -or $logLevel -ieq 'dbg' }) { return "yellow" }
        ( { $logLevel -ieq 'info' -or $logLevel -ieq 'inf' }) { return "green" }
        ( { $logLevel -ieq 'warning' -or $logLevel -ieq 'wrn' }) { return "red" }
        ( { $logLevel -ieq 'error' -or $logLevel -ieq 'err' }) { return "red" }
        ( { $logLevel -ieq 'FATAL' -or $logLevel -ieq 'ftl' }) { return "red" }
        ( { $logLevel -ieq 'none' -or $logLevel -ieq 'non' }) { return $null }
        Default { return $null }
    }
}

function log {
    param (
        [Parameter(Mandatory=$true)]
        [string] $loglevel,
        [Parameter(Mandatory=$true)]
        [string] $message
    )
    #variables
    $logtype = getloglevel $loglevel
    $typeline = switch ($logtype) {
        trace { "[TRACE $time] "}
        debug { "[DEBUG $time] "}
        info { "[INFO $time] "}
        warn { "[WARN $time] "}
        error { "[ERROR $time] "}
        fatal { "[FATAL $time] "}
    }
    $color = GetLogColor $loglevel
    write-host $typeline -ForegroundColor $color -NoNewline
    write-host $message
    #File logging
    $wholemessage = "$typeline" + " " + "$message" 6>&1
    Out-File -FilePath $logfile -Append -InputObject $wholemessage
}